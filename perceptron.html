<html>
	<header>
		<title>Perceptron</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script type="text/javascript">
			this.Perceptron = function () {
				var network = this;
				this.bias = 1;
				this.weights = [];
				this.learnRate = 0.15;
				this.interactions = 1000;

				this.sigmoid = function (x) {
					return (1 / (1 - Math.exp(-1 * x)));
				};

				this.init = function (learnRate, interactions) {
					network.learnRate = learnRate;
					network.interactions = interactions;
				}

				this.initWeights = function (num) {
					bias = parseInt(Math.random() * 10);

					for (var i = 0; i < num; i++) {
						network.weights[i] = parseInt(Math.random() * 10);
					}
				}

				this.train = function (data) {
					network.initWeights(data[0].inputs.length);
					var interaction = 0;
					var error = true;

					while (error && interaction < network.interactions) {
						//error = false;
						var difference = 0;

						for (var i = 0; i < data.length; i++) {
							var result = network.run(data[i].inputs);
							if (result != data[i].output) {
								error = true;
								difference = data[i].output - result;
								network.recalcWights(difference, data[i].inputs);
							} else {
								//error = false;
							}
						}

						console.log("Interactions: " + interaction + " - Error: " + difference.toFixed(12));
						interaction++;
					}
				}

				this.recalcWights = function (val, inputs) {
					for (var j = 0; j < network.weights.length; j++) {
						network.weights[j] = network.weights[j] + network.learnRate * val * inputs[j];
					}
				}

				this.run = function(inputs) {
					var sum = 0;

					for (var j = 0; j < inputs.length; j++) {
						sum += inputs[j] * network.weights[j];
					}
					sum += network.bias;

					return network.sigmoid(sum);
				}
			}			
		</script>
		<script>
			var trainingSets = [
				{ inputs: [0, 2], output: 0 },
				{ inputs: [0, 1], output: 0 },
				{ inputs: [1, 2], output: 0 },
				{ inputs: [2, 2], output: 0 },
				{ inputs: [3, 1], output: 1 },
				{ inputs: [4, 1], output: 1 },
				{ inputs: [4, 0], output: 1 },
				{ inputs: [4, 3], output: 0 }
			];

			var neuron = new Perceptron();
			neuron.init(0.15, 1000);
			neuron.train(trainingSets);

			console.log(neuron.run([5, 3]));
		</script>
	</header>
	<body>

	</body>
</html>